<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Image Occlusion 2.0 - Help page</title>
</head>
<body style="width: 538px;">
<h1><a class="mozTocH1" name="mozTocId304148"></a>Image Occlusion 2.0
User Manual</h1>
<div style="text-align: center;">
<address><span style="font-weight: bold;">Author Contact:</span>
tmbb@campus.ul.pt</address>
</div>
<br>
WARNING: this is your local copy of the documentation and may be
outdated. For the latest version of the documentation and documentation
in other languages, see the wiki.<br>
<br>
<span style="font-weight: bold;">Table of Contents</span><br>
<span style="text-decoration: underline;"></span>
<ol id="mozToc">
<!--mozToc h1 1 h2 2 h3 3 h4 4 h5 5 h6 6-->
  <li><a href="#mozTocId304148">Image Occlusion 2.0 User Manual</a>
    <ol>
      <li><a href="#mozTocId218624">Introduction</a></li>
      <li><a href="#mozTocId967720">Basic usage
        </a>
        <ol>
          <li><a href="#mozTocId856452">Meaning of the buttons</a>
            <ol>
              <li><a href="#mozTocId38927">Non Overlapping</a></li>
              <li><a href="#mozTocId237582">Overlapping</a></li>
              <li><a href="#mozTocId915145">Which one do I use?</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li><a href="#mozTocId366752">Advanced Use</a>
        <ol>
          <li>
            <ol>
              <li><a href="#mozTocId202519">Adding Images from the
clipboard</a></li>
              <li><a href="#mozTocId344532">Beyond Rectangles</a></li>
              <li><a href="#mozTocId69958">Edit the image before
placing the masks</a></li>
              <li><a href="#mozTocId878902">Further reading</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li><a href="#mozTocId698449">Changing Default Options</a></li>
      <li><a href="#mozTocId27759">Help</a></li>
      <li><a href="#mozTocId396176">Plans for the future</a></li>
      <li><a href="#mozTocId677801">FAQ:</a></li>
    </ol>
  </li>
</ol>
<span style="text-decoration: underline;"></span>
<br>
<h2><a class="mozTocH2" name="mozTocId218624"></a>Introduction</h2>
This addon allows you to add image occlusion cards to Anki. Image
occlusion cards are like cloze deletions with graphics.<br>
In general, you hide parts of an image, and during the repetitions you
must guess what the hidden part is.<br>
Image Occlusions are discussed in the esupermemo website (<a
 href="http://www.supermemo.com/articles/flow.htm#Occlusion%20test">www.supermemo.com/articles/flow.htm#Occlusion
test</a>)<br>
In practice, you will often have an image with labels, and you will
hide the labels which you want to guess during the<br>
repetitions. Because an image is worth 1000 words (these are just two
of 38 cards generated from the image):<br>
<br>
<table
 style="text-align: left; width: 952px; height: 60px; margin-left: auto; margin-right: auto;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td colspan="1" rowspan="1" style="vertical-align: top;"><span
 style="font-weight: bold;">Question:</span><br>
      </td>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Answer</span><br>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="vertical-align: top;"><img
 src="images/thigh_muscles_non_overlapping_question.png" alt=""> <br>
      </td>
      <td style="vertical-align: top;"><img
 src="images/thigh_muscles_non_overlapping_answer.png" alt=""> </td>
    </tr>
  </tbody>
</table>
<br>
<h2><a class="mozTocH2" name="mozTocId967720"></a>Basic usage<br>
</h2>
The addon is very simple. In the <span style="font-style: italic;">note
editor</span>, a new button has appeared, containing the text <span
 style="font-style: italic;">Image Occlusion</span>
(ignore the cute panda, the lightning bolt icon and the grey snowflakes
near the fields; they are from some of my other addons. If you are
curious, please see check these: <a
 href="http://beta.ankiweb.net/shared/info/45911888">panda</a>, <a
 href="http://beta.ankiweb.net/shared/info/491274358">lightning bolt</a>,
<a href="http://beta.ankiweb.net/shared/info/2819760111">snowflakes</a>).<br>
<br>
<img src="images/new_button.png" alt=""><br>
<br>
To add new Image Occlusion cards to your collection, click that button.
You will be asked to choose an image file to generate cards from it.
Choose the file, and a new window will appear, with an image editor
containing the image ready for you to edit. You generate Image
Occlusion cards by drawing shapes (or masks) over the original image.
There are several shapes you can draw, and you can group shapes
together to cover non-contiguous parts of the image. In the vast
majority of cases you will want to use rectangles.<br>
Let's see how everything is processed from the begining:<br>
<ol>
  <li>Open the note editor (by clicking <span
 style="font-weight: bold;">Add</span> in the deck browser, for example)<img
 src="images/new_button.png" alt=""></li>
  <li>Click the Image Occlusion button</li>
  <li>Choose the image file you want to use (I chose an image from <a
 href="http://www.amazon.com/Atlas-Human-Anatomy-Student-Consult/dp/1416059512">Netter's
atlas</a>, depicting a deep dissection of the muscles of the thigh).
You can also <a href="#clipboard">use an image from the clipboard</a>.<br>
  </li>
  <li>An image editor will appear.<img src="images/editor.png" alt=""></li>
  <li>You can now start to draw rectangles over the labels you want to
hide in your image.<img
 src="images/editor_muscles_of_thigh_first_mask.png" alt=""></li>
  <li>The initial tool is the rectangle tool, so you can start
drawing rectangles right away. The rectangles are initially set to
white, but the color can be changed in the color panel in the bottom of
the screen. The rectangle tool is marked with an arrow in the following
screenshot:<img src="images/new_button_marked.png" alt=""></li>
  <li>Repeat for all labels<img
 src="images/editor_muscles_of_thigh_all_masks.png" alt=""></li>
  <li>Now
that all labels are hidden, you must add the cards to Anki. To add the
cards, you click one of the following buttons (their meaning will be
discussed later):<img src="images/editor_buttons_marked.png" alt=""> </li>
  <li style="text-align: left;">A new window will appear, indicating
the number of notes that will be generated:<img
 src="images/notes_generated.png" alt=""></li>
  <li>Click <span style="font-weight: bold;">Ok</span> (or press <span
 style="font-style: italic;">Enter</span>, which is faster)</li>
  <li>Congratulations: you have added your first set of image occlusion
notes.</li>
  <li>Don't
close the editor window! A bug in Qt means that if you close the editor
window, you have to restart Anki to add more Image Occlusion cards. As
long as you keep this window open, you should be able to add Image
Occlusion cards from any number of images. Please note that Anki might
choke if you try to add lots of cards from the same image (a known bug,
see the FAQ).<br>
  </li>
</ol>
<h3><a class="mozTocH3" name="mozTocId856452"></a>Meaning of the buttons</h3>
There are two buttons:<br>
<br>
<table style="text-align: left; width: 538px; height: 81px;" border="1"
 cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;">1. Non-overlapping<br>
      </td>
      <td style="vertical-align: top;"><img
 style="width: 32px; height: 33px;" alt="Non-overlapping"
 src="images/button_non_overlapping.png"></td>
      <td style="vertical-align: top;">(<span
 style="text-decoration: underline;">Mnemonic</span>: notice that the
two shapes don't overlap)</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">2. Overlapping<br>
      </td>
      <td style="vertical-align: top;"><img
 style="width: 31px; height: 32px;" src="images/button_overlapping.png"
 alt=""></td>
      <td style="vertical-align: top;"> (<span
 style="text-decoration: underline;">Mnemonic</span>: notice that the
two shapes overlap)</td>
    </tr>
  </tbody>
</table>
<ol>
</ol>
<h4><a class="mozTocH4" name="mozTocId38927"></a>Non Overlapping</h4>
This button is called non-overlapping because it generates cards in
which there is no overlapping information.<br>
This is because the question side of the cards hides all labels, hiding
the label the user is supposed to guess in a different color, and the
answer shows only that layer (and none of the other layers). This is
the same as showing a cloze deletion sentence with all parts hidden,
while asking only for one of them. For example:<br>
<br>
<table
 style="text-align: left; width: 100%; margin-left: auto; margin-right: auto;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td colspan="1" rowspan="1"
 style="vertical-align: top; font-weight: bold;">Question:<br>
      </td>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Answer:</span><br>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="vertical-align: top;"><img
 src="images/thigh_muscles_non_overlapping_question.png" alt=""> <br>
      </td>
      <td style="vertical-align: top;"><img
 src="images/thigh_muscles_non_overlapping_answer.png" alt=""> </td>
    </tr>
  </tbody>
</table>
<h4><a class="mozTocH4" name="mozTocId237582"></a>Overlapping</h4>
This button is called overlapping because it generates cards in which
there is overlapping information.<br>
This
is because the question side of the cards shows all labels except
for the one the user is supposed to guess, and the answer shows all
labels. This is the same as showing a cloze deletion sentence with only
one cloze for the user to guess. For example (compare ieith the
previous one):<br>
<table
 style="text-align: left; width: 100%; margin-left: auto; margin-right: auto;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Question:</span><br>
      </td>
      <td colspan="1" rowspan="1" style="vertical-align: top;">Answer:<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img
 src="images/thigh_muscles_overlapping_question.png" alt=""></td>
      <td colspan="1" style="vertical-align: top;"><img
 src="images/thigh_muscles_overlapping_answer.png" alt=""></td>
    </tr>
  </tbody>
</table>
<br>
<h4><a class="mozTocH4" name="mozTocId915145"></a>Which one do I use?</h4>
That depends on the material you're adding, as wel as your personal
preferences.<br>
I believe that for images that consist of a drawing with some labels
pointing to parts of the image, <span style="font-style: italic;">non-overlapping</span>
image oclcusion is better, because it deprives the user of clues that
might help him to answer the answer correctly without being really
sure. A user that can see all labels except for one might easily be
able to guess the missing one. Despite this conjecture, I have no data
showing the superiority of either method in this situation.<br>
In images where context is critical, like a diagram representing a
biochemistry cycle (e.g. Krebs cycle), in chich the compounds come one
after the other, you have to use <span style="font-style: italic;">overlapping</span>
image occlusion. You can't guess the that a label is hiding compound <span
 style="font-style: italic;">B</span>, for example, unless you can see
that it comes from <span style="font-style: italic;">A</span> and
becomes <span style="font-style: italic;">C</span>.<br>
Here is an example of overlapping image occlusion being used on a
diagram of the <a href="http://en.wikipedia.org/wiki/Citric_acid_cycle">Krebs
cycle</a>:<br>
<br>
<table
 style="text-align: left; width: 100%; margin-left: auto; margin-right: auto;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Question:</span><br>
      </td>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Answer:</span><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img
 src="images/krebs_fumaric_question.png" alt=""></td>
      <td style="vertical-align: top;"><img
 src="images/krebs_answer.png" alt=""></td>
    </tr>
  </tbody>
</table>
With non-overlapping image occlusion you would have to memorize the
place of fumaric acid in this specific drawing of the cycle. With
overlapping image occlusion, you have only to memorize which compound
comes from <span style="font-style: italic;">succinic acid</span> and
turns into <span style="font-style: italic;">malic acid</span>, which
is exactly our goal.<br>
<br>
<h2><a class="mozTocH2" name="mozTocId366752"></a>Advanced Use</h2>
<h4><a class="mozTocH4" name="mozTocId202519"></a><span
 style="font-weight: bold;"><a name="clipboard"></a>Adding Images from
the clipboard</span></h4>
If you have an image in the clipboard (a screenshot, for example), when
you click the <span style="font-style: italic;">Image Occlusion</span>
button, the addon will not ask you for a filename, and will use the
image in the clipboard. The image will be cleared from the clipboard
imediately after appearing in the image editor. If clearing the
clipboard is inconvenient for you, drop me a line and I will make this
customizable.<br>
<br>
<h4><a class="mozTocH4" name="mozTocId344532"></a>Beyond Rectangles</h4>
Although the previous discussion used rectangles as an example, you can
use any kind of shapes, or even a group of shapes to hide parts of the
image. Using a group of shapes might be useful if you want to hide two
non contiguous parts of the image. See <a
 href="http://ehmdunque.altervista.org/i-informatica/manuali/Short_intro_SVG-edit.html">this
link</a> for a turorial on the use of the editor, which includes
instructions on how to group/ungroup objects.<br>
Here is an example of using a group of two rectangles to hide two
different chemical compounds in the Krebs cycle:<br>
<br>
<table
 style="text-align: left; width: 100%; margin-left: auto; margin-right: 0px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Question:</span><br>
      </td>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Answer:</span><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><img src="images/krebs_NAD.png"
 alt=""></td>
      <td style="vertical-align: top;"><img
 src="images/krebs_answer.png" alt=""></td>
    </tr>
  </tbody>
</table>
<br>
<br>
Why do I choose to hide them at the same time? Well, anyone who knows
some biochemistry knows that if you see NAD+ in one side of a chemical
reaction, NADH will appear on the other side (not always, but
incredibly often in human metabolism). If you are shown one of them,
guessing the other requires no knowlege of the specific chemical
reaction you are studying. We want to test our knowlege of the Krebs
cycle, and not whether or not we know a basic rule of thumb, and so we
hide both compunds at the same time. Because these two compounds are so
closely associated at this stage (to understand the Krebs cycle you
need to <a
 href="http://www.supermemo.com/articles/20rules.htm#Build%20upon%20the%20basics">know
the basics</a>, namely what NAD+ and NADH are), the pair works as a
single <a href="http://en.wikipedia.org/wiki/Chunking_%28psychology%29">chunk</a>,
and we are not contradicting the <a
 href="http://www.supermemo.com/articles/20rules.htm#minimum%20information%20principle">minimum
information principle</a>.<br>
<br>
<h4><a class="mozTocH4" name="mozTocId69958"></a>Edit the image before
placing the masks</h4>
You can edit the image to before hide the masks. The editor contains a
side<br>
panel named layers. If you click the word layers, it will appear. By
default, the <span style="font-style: italic;">Shapes</span> layer is
active, which means that whatever you draw is interpreted as a mask to
hide part of the image.<br>
<br>
<img src="images/layers_shapes_active.png" alt=""><br>
<br>
However, if you select the <span style="font-style: italic;">Picture</span>
layer (by clicking it), you will be able to draw over the image in a
way that is not interpreted as masks hiding the image. When you want to
draw the masks, you just select the <span style="font-style: italic;">Shapes</span>
layer again.<br>
<br>
<h4><a class="mozTocH4" name="mozTocId878902"></a>Further reading</h4>
For documentation on how to use the editor, see the <a
 href="http://code.google.com/p/svg-edit/">official website</a>.<br>
<h2><a class="mozTocH2" name="mozTocId698449"></a>Changing Default
Options</h2>
As of the current version, you can change:<br>
<ol>
  <li>the default color of the rectangles in the editor [default
value is white]. Please note that you can also change the rectangle
color in the editor itself.<br>
  </li>
  <li>the color of the
rectangle that appears in the question [default value is red, as in the
examples shown]. You can't change this option in the editor.</li>
</ol>
To change configure this options, go to the <span
 style="font-style: italic;">Tools</span> &gt; <span
 style="font-style: italic;">Image Occlusion 2.0 (options)</span> menu,
as shown in the picture:<br>
<br>
<img src="images/tool_options.png" alt=""><br>
<br>
The following window will appear:<br>
<br>
<img src="images/options_window.png" alt=""><br>
<br>
Click the<span style="font-style: italic;"> Choose Color</span>
buttons, and you will be presented with a color palette from which you
can choose a color.<br>
<h2><a class="mozTocH2" name="mozTocId27759"></a>Help</h2>
You can access this help in the help menu of Anki's main window:<br>
<br>
<img src="images/help.png" alt=""><br>
<br>
<br>
<h2><a class="mozTocH2" name="mozTocId396176"></a>Plans for the future</h2>
The most important issue that needs to be solved is the <a
 href="#big_bug">major bug</a>
(not the same one as the previous version; that one has a decent
workaround now) described in the FAQ, but this is currently out of my
control. Suggestions are accepted and deeply appreciated.<br>
<br>
I also plan to implement a mechanism that allows the user to select
from the Anki browser all cards generated from the same image. This
feature is expected to come soon, as there are no major barriers to its
implementation.<br>
<br>
As soon as Anki upgrades to a Qt version with better support for <a
 href="http://en.wikipedia.org/wiki/Svg">SVG</a>s linking to <a
 href="http://en.wikipedia.org/wiki/Portable_Network_Graphics">PNG</a>
files, I will be able to achieve major space saving measures.<br>
<br>
<h2><a class="mozTocH2" name="mozTocId677801"></a>FAQ:</h2>
<span style="font-weight: bold;">What is this editor you're using?</span>
it is svg-edit, a javascript editor that is available in the <a
 href="http://code.google.com/p/svg-edit/">official website</a>. None
of the core code has been touched, and only an extension has been
written.<br>
<br>
<span style="font-weight: bold;">Where is the place to go to know more
about this editor?</span> You can go to the <a
 href="http://code.google.com/p/svg-edit/">official website</a>. It
contains lots of documentation, and can give you ideas on
how to use the full power of svg-edit to your image occlusion workflow
(I have to say that in my opinion most of the time nothing beats the
old rectangle). <a
 href="http://ehmdunque.altervista.org/i-informatica/manuali/Short_intro_SVG-edit.html">This
tutorial</a> is also very helpful.<br>
<br>
<span style="font-weight: bold;"><a name="space"></a>Why do these cards
take so much space in my hard drive?</span>
The answer is quie technical. These cards take a ton of space because I
must generate a <a
 href="http://en.wikipedia.org/wiki/Portable_Network_Graphics">PNG</a>
per card side, and PNGs, being bitmap image files,
take a lot of space. It should be possible to use the same base PNG for
all card sides and let each card side be an SVG file that links that
PNG and covers it with the appropriate masks, which would save a ton of
space. However, <a href="http://qt-project.org/doc/qt-4.7/">Qt</a>,
the graphical user interface library used by Anki,
has problems displaying <a href="http://en.wikipedia.org/wiki/Svg">SVG</a>
files that link to PNG files (at least in
Windows). This means that I can't save space in any meaningful way. If
a new Anki release comes with better support for SVG files (by using a
new Qt version), I will be happy to update this addon accordingly.<br>
<span style="font-weight: bold;"><br>
Sometimes, the editor refuses to appear correctly. Why?</span>
This is probably due to a bug in <a
 href="http://qt-project.org/doc/qt-4.7/">Qt</a>
(the graphical user interface
library used by Anki), more specifically in the WebKit engine. In my
system (Windows 7), the editor is always
displayed correctly the first time it is used, but if I try to use it
again without restarting Anki, it fails to appear correctly. If I
restart Anki, the editor works again. In your system it may be
different. To avoid this situation, please keep the image editor window
open until you shut Anki down. This way, you should be able to add
Image Occlusion cards from as many images as you want. This is not an
ideal situation, and it might be fixed in a new Anki version.<br>
<br>
<br>
<span style="font-weight: bold;"><a name="big_bug"></a>Sometimes Anki
crashes when I try to add Image Occlusion cards. Why?</span>
Anki might choke if you try to add lots of cards from the same image
(it might return an error or crash). You won't loose data in any case,
I suppose. This is probably not Anki's fault. I'm not sure what's the
cause of this bug, but I think it might have to do with Qt's WebKit
implementation. I'm abusing Qt's WebKit to grenerate PNGs from SVGs,
while I should probaly be using the QSvg module, which is not
(currently) bundled with Anki.<br>
To work around this bug, you might try to generate fewer Image
Occlusion cards at the same time (for example, instead of generating
100 cards at the same time, try to generate<br>
50 + 50 cards).<br>
<br>
<span style="font-weight: bold;">Can I add images from the clipboard?</span>
<a href="#clipboard">YES YOU CAN!</a> :)<br>
<br>
<span style="font-weight: bold;">Why is this addon called <span
 style="font-style: italic;">Image Occlusion 2.0</span><span
 style="font-weight: bold;">?</span> Is there an addon called Image
Occlusion 2.0?</span> Some time ago I wrote <a
 href="http://beta.ankiweb.net/shared/info/2189266752">another addon</a>
called <span style="font-style: italic;">Image Occlusion</span>. I
consider this one to be a successor of <span
 style="font-style: italic;">Image Occlusion</span>,
because it is better integrated with Anki, much easier to install and
more customizable than what I managed to do while interfacing Anki with
Inkscape. However, because of the <a href="#big_bug">major bug</a>
discussed in the previous question<span style="font-weight: bold;"></span>,
I can't just remove the previous addon and replace it by this one.
That's why I had to give it a new name. That said, my other addon is
also
notoriously buggy in some systems (probably a bug in Inkscape), so
those who can't setup <span style="font-style: italic;">Image Occlusion</span>
correctly, might want to try <span style="font-style: italic;">Image
Occlusion 2.0</span>.<br>
<br>
<span style="font-weight: bold;">I have another question!</span>
Contact the author: <span style="font-style: italic;">tmbb@campus.ul.pt</span>
</body>
</html>
